# File Picker UI Guide

## Chat Input Area - New Buttons

The chat input area now has **two new buttons** for file operations:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚  Ask Meowstik anything...                                          â”‚
â”‚  [User types message here]                                         â”‚
â”‚                                                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                                                     â”‚
â”‚  [ğŸ–¥ï¸] [ğŸ“] [ğŸ“] [ğŸ¤]                            [ğŸ“·] [â–¶ï¸ Send]   â”‚
â”‚   â”‚    â”‚    â”‚    â”‚                                â”‚      â”‚         â”‚
â”‚   â”‚    â”‚    â”‚    â””â”€ Voice input                   â”‚      â””â”€ Send  â”‚
â”‚   â”‚    â”‚    â”‚                                      â”‚               â”‚
â”‚   â”‚    â”‚    â””â”€â”€â”€â”€â”€â”€ NEW: Folder picker            â””â”€ Screenshot   â”‚
â”‚   â”‚    â”‚                                                           â”‚
â”‚   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ NEW: Enhanced file picker                    â”‚
â”‚   â”‚                                                                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Auto-screenshot toggle                      â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Button Details

#### ğŸ“ File Picker (Enhanced)
- **Location**: Bottom-left action bar
- **Function**: Opens native OS file picker
- **Features**:
  - Select multiple files
  - Filter by file type
  - Native OS dialog (Chrome/Edge)
  - Falls back to traditional picker (Safari/Firefox)

#### ğŸ“ Folder Picker (NEW)
- **Location**: Next to file picker button
- **Function**: Opens directory/folder picker
- **Features**:
  - Select entire directories
  - Preserves folder structure
  - Uploads up to 50 files
  - Shows file count in toast notification

## AI Message Actions - Download Button

AI responses now have a **download button** to save content to disk:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ¨  Nebula AI                                         [Model 2.0]  â”‚
â”‚                                                                     â”‚
â”‚  Here's the code you requested:                                    â”‚
â”‚                                                                     â”‚
â”‚  ```javascript                                                      â”‚
â”‚  function greet(name) {                                            â”‚
â”‚    return `Hello, ${name}!`;                                       â”‚
â”‚  }                                                                  â”‚
â”‚  ```                                                                â”‚
â”‚                                                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                     â”‚
â”‚  [ğŸ“‹] [â¬‡ï¸] [ğŸ”„]                                      [ğŸ‘] [ğŸ‘]    â”‚
â”‚   â”‚    â”‚    â”‚                                          â”‚    â”‚      â”‚
â”‚   â”‚    â”‚    â””â”€ Regenerate                              â”‚    â””â”€ Bad â”‚
â”‚   â”‚    â”‚                                               â”‚           â”‚
â”‚   â”‚    â””â”€â”€â”€â”€â”€â”€ NEW: Download to file                   â””â”€ Good    â”‚
â”‚   â”‚                                                                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Copy to clipboard                                 â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Download Button Details

#### â¬‡ï¸ Download Button (NEW)
- **Location**: Between copy and regenerate buttons
- **Function**: Saves AI response to local file
- **Features**:
  - Smart file type detection
  - Suggests appropriate file extension
  - Native save dialog (Chrome/Edge)
  - Falls back to download link (other browsers)

**File Type Detection:**
- Code blocks â†’ `.js`, `.py`, `.java`, etc. (based on language)
- JSON content â†’ `.json`
- Default â†’ `.txt`

## User Workflows

### Workflow 1: Upload Multiple Files

```
1. User clicks file picker button (ğŸ“)
   â”‚
   â”œâ”€> Chrome/Edge: Native OS file picker appears
   â”‚
   â””â”€> Safari/Firefox: Browser file picker appears
   
2. User selects multiple files (Ctrl+Click or Cmd+Click)
   â”‚
   â””â”€> Files are read and compressed (if images)
   
3. File previews appear above input area
   â”‚
   â””â”€> User can remove files with X button
   
4. User types message and clicks Send
   â”‚
   â””â”€> Files are sent as attachments with message
```

### Workflow 2: Upload Entire Folder

```
1. User clicks folder picker button (ğŸ“)
   â”‚
   â”œâ”€> Chrome/Edge: Native directory picker appears
   â”‚
   â””â”€> Safari/Firefox: "Select folder" picker with webkitdirectory
   
2. User selects a folder
   â”‚
   â””â”€> All files in folder are read (up to 50 files)
   
3. Toast notification shows file count
   â”‚
   â””â”€> "Folder Uploaded: 12 files added to the message"
   
4. File previews appear with full paths
   â”‚
   â””â”€> e.g., "project/src/app.js", "project/config/settings.json"
   
5. User clicks Send to upload folder contents
```

### Workflow 3: Save AI Response

```
1. AI generates response (code, text, JSON, etc.)
   â”‚
   â””â”€> Response appears in chat
   
2. User clicks download button (â¬‡ï¸)
   â”‚
   â”œâ”€> Chrome/Edge: Native "Save As" dialog appears
   â”‚   â””â”€> User chooses location and filename
   â”‚
   â””â”€> Safari/Firefox: File downloads automatically
       â””â”€> Browser's default download behavior
   
3. File is saved with smart extension
   â”‚
   â”œâ”€> Code: ai-response-2026-01-16.js
   â”œâ”€> JSON: ai-response-2026-01-16.json
   â””â”€> Default: ai-response-2026-01-16.txt
```

## Visual States

### File Picker Button States

```
Normal State (Idle):
[ğŸ“]  â† Gray icon, hover shows primary color

Hover State:
[ğŸ“]  â† Primary color, slight background highlight

After Selection:
[ğŸ“]  â† Returns to normal, files shown above input
```

### Folder Picker Button States

```
Normal State:
[ğŸ“]  â† Gray icon, hover shows primary color

Hover State:
[ğŸ“]  â† Primary color with background highlight

Processing:
[ğŸ“]  â† Brief processing while reading files
```

### Download Button States

```
Normal State:
[â¬‡ï¸]  â† Gray icon in AI message footer

Hover State:
[â¬‡ï¸]  â† Darker gray with background highlight

Clicking:
[â¬‡ï¸]  â† Shows native save dialog immediately
```

## Attachment Preview Area

When files are attached, they appear above the input:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚  [X]   â”‚  â”‚  [X]   â”‚  â”‚  [X]                 â”‚                â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â” â”‚  â”‚  ğŸ“ data.json        â”‚                â”‚
â”‚  â”‚ â”‚IMG â”‚ â”‚  â”‚ â”‚IMG â”‚ â”‚  â”‚  (5.2 KB)            â”‚                â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”˜ â”‚  â”‚                      â”‚                â”‚
â”‚  â”‚ cat.jpgâ”‚  â”‚ dog.pngâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚   â†‘            â†‘             â†‘                                     â”‚
â”‚   â”‚            â”‚             â””â”€ Non-image file                    â”‚
â”‚   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Image preview                     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Image preview with thumbnail     â”‚
â”‚                                                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  Ask Meowstik anything...                                          â”‚
â”‚  [Type your message here]                                          â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Image Attachments
- Show thumbnail preview
- Display filename below
- X button to remove (top-right corner)
- Hover shows remove button

### Non-Image Attachments
- Show paperclip icon
- Display filename and size
- X button to remove
- No thumbnail preview

## Keyboard Shortcuts

| Action | Shortcut | Description |
|--------|----------|-------------|
| Send message | `Enter` | Send with all attachments |
| New line | `Shift + Enter` | Add line break in message |
| Remove last attachment | `Backspace` (on empty input) | Remove most recent file |

## Accessibility

### ARIA Labels

All buttons have proper accessibility labels:

```html
<!-- File picker button -->
<button aria-label="Attach files" title="Attach files">
  ğŸ“
</button>

<!-- Folder picker button -->
<button aria-label="Attach entire folder" title="Attach entire folder">
  ğŸ“
</button>

<!-- Download button -->
<button aria-label="Download to file" title="Download to file">
  â¬‡ï¸
</button>
```

### Screen Reader Announcements

```
"File picker button. Attach files to your message."
"Folder picker button. Attach entire folder to your message."
"Download button. Save AI response to file."
"3 files attached. cat.jpg, dog.png, data.json."
"File removed. 2 files remaining."
```

## Toast Notifications

### Success Messages

```
âœ“ Files Attached
  3 file(s) added to the message
  
âœ“ Folder Uploaded
  12 file(s) from folder added to the message
```

### Error Messages

```
âœ— File Selection Failed
  Unable to select files. Please try again.
  
âœ— Folder Selection Failed
  Unable to select folder. Please try again.
```

---

**Tip**: Try the folder picker to upload an entire project directory in one click!
**Tip**: Use the download button to save useful AI-generated code snippets!
